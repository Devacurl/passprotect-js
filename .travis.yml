language: node_js
node_js: '9'
install: pip install awscli
script:
- npm install
- npm run build
- npm run package
after_success:
- echo "hi"
- aws s3 cp umd/passprotect.min.js s3://cdn.passprotect.io
- aws configure.set preview.cloudfront true
- aws cloudfront create-invalidation --distribution-id $AWS_CF_DISTRIBUTION_ID --paths
  "/*"
env:
  global:
  - secure: ieWWiuqmCoXNG6VoFC8HoUhJGyg5eqraEaolkzDYMYnygYPOJjHhGJqqZ+EMm92eVkEcvRM4MwRVPZqN4pTxOQHR0QZZK/PlQKUmnRtnkwmaK+4G1ISGXzQCyeI/mkhin0s7r/9Ya2yDKVxCObYr0ZXIqwMyXrL7JqFcJyimKhldSz0KxshvgUiydF9a1CJ/y8aQKBFGrGwvJIQIPamjTV5UPPcGwBS8GhMnafrw7HqEn/KAwwhYLskJrhmJltwLdk6dM5y6vtJkQN6Wm+BygZEQsGYUNecihd88usSIhizg4/MasUW1Ul7NHjwzDaQSMYPcoFmUwKMujYHn84rGhDd89e5JuddRb5bNcANOyZAiZ4mlRxHtOCbvxqezcR/xJIRgnVrLSH+/LRwC27+5F2xZFuNR47qhi69VRhQmlhvZg4F/eBjPblUepFxfopx0aaEkKivTkjXWOZ6FRVYjtwmEQMZZPROTi7iCHmIgBse4++4GN4MaC5QuuMBqaKOwK9Sqrmvf6Vsz5GQBiBv+EG7SiOvgI2yDByCs/O9bbMSxKDSkR44Q8ECEnFu/ZtXzKGXwunseeo7hrE/896xoBoriaMAp6x/5mYv3WUgXKCcaMwV048SltnapHPgvUTq8KG4FDVSznHwVTtspRfbDac7Pe87E+vF3mQSBEfYxw70=
  - secure: NfKyJKqT6uq1WBpJMNilfS+oJJayEUISmzqIfRwBuHJasqTONi245E/eDk1ffdvFtlQa4jZE0pt2uqDJUgRXVwFXawPdoIW+IhFHGm5Au8Tu6//cqRPv5pJdCIZR82Omvweg+OoDeNe55iMPVxz6yaSpjdDGXZyEY1EPNTSPPNgyF+bZrdA7qau7xFDqbY+vfGctrTs8mCB4d2GzCKeQVDJOVzxmATAJxqWi8b2uNeRJdHkI8E9uIw4C7Hg+nsvTvTPrG8/udUXmf02rwY6w2H/zbA/gMKJFGMCiWBZCqZkh04dSi7G5qCaEGzuresSSZXMo6dfDiDSE5yxZD+YRpSWg+jPEo9nOz2vIuBYikQVo/6EW2YZR3/9ZwX6N9LHUXUDZwePhe6bnY7TZ3QveuNnGzsla56JvjVi3YoN7Sxei598BQ3h+HcukuOL5h0R6UV+IYXWuD8WiE1tDTKAB/W9pAXQjG7yXKs9I10bLYGjipURrAp/R/JaEwffY6ntq4DBLrX/ZoiR3iOnNTuUVeFJCrR1dzWeo6jGMdyzcUBXuZpKO4uK4cixZpOZp9bsvwwcJmoK3rPGFM2JiWb3qtdf5nETYAQIf1L69xO+tFU7Uj55a3dTmP+ZQ7zVJ53OQa8ATJUdJrZSSPsaeCWO+M59NRCgQGqRRechWTj16Ph0=
  - secure: d5HOJUslUHGasZb/S4yoUCkv46871ZLlfIPEtjm5X2ZpwwltgXrM/uEWujQSZU5M31wKP2C1QGaQOJLH2kuKkKs9HiTRZzZfPzDvoozpVEIQyKX4r2+EcyaaQevYEKXik9NnM9rWVCZUy9UPnzmCBjvFGoGG1xZNphpYRZUgWOrtYCc7EpmiLkJV2gO69lH67KEAXT9duMZd8JU2vpoxTemc3NLW1awqcex1ns7/g20zNDXbGAoSLUd5HkTx85nx3kGfGuPCEvmmCYnK8tMz32e//uQQD/gDcHEOkmAXtsE16CCrR2H9wV0s7ISRG7VC2P6GXEofRspRxjSwjHmw6vLzS7eckGiocSyUKLO+fayiqp+jdiiBL2q1p+KpdPCCPzi1jSbHq2bPCsN+Halb85lECgj0qUO0317Z24lpaTAHkj9OzPEmwbm60J9oT2QXHKUEKzwxri05UrMp/O+5YPQPgtnqUZHOMpVS6E3WI0JWZn7DTA2gBmMBf2Sz6zqPbrJ8qdgDMLPGXWMsRYSnt24hYIe2b+8ztgLapX2ggsdVwpKl39jDsnfaeMhFZt4u55IkpILiLyA0ywqUvD3AQKZowY9FpRQw8Tle535eMq6rB0ak1sYTegRndeqZRTMwjjhiNeta16qp1GPtwTHrPEZ3zWuKHdR1qWlFY7O1zrk=
